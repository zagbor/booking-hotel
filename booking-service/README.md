üè® Booking Hotel ‚Äî –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –æ—Ç–µ–ª–µ–π
–û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

Booking Hotel ‚Äî —É—á–µ–±–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ –æ—Ç–µ–ª–µ–π.
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ —á–µ—Ç—ã—Ä–µ –º–æ–¥—É–ª—è, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö —á–µ—Ä–µ–∑ Eureka Service Registry –∏ API Gateway.
–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–µ–ª—è–º–∏ –∏ —à–ª—é–∑–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

üß© –ú–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
1. Eureka Server (eureka-server)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä —Å–µ—Ä–≤–∏—Å–æ–≤.

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è booking-service, hotels –∏ gateway.

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8761.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ application.yml.

2. API Gateway (gateway)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Spring Cloud Gateway.

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ booking-service –∏ hotels.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

JWT-–≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ —à–ª—é–∑–∞.

–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ Authorization –∏ X-Correlation-Id.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç SecurityConfig, JwtConfig, JwtSecretKeyProvider.

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 8080.

3. Booking Service (booking-service)

–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

–§—É–Ω–∫—Ü–∏–∏:

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π.

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (AdminController).

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

–†–µ–∞–ª–∏–∑—É–µ—Ç —à–∞–±–ª–æ–Ω –¥–≤—É—Ö—Ñ–∞–∑–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (PENDING ‚Üí CONFIRMED / CANCELLED) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (SecurityConfig, JwtConfig, JwtService).

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é H2-–±–∞–∑—É.

–ü–æ—Ä—Ç: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π (—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Eureka –ø–æ–¥ booking-service).

4. Hotel Service (hotels)

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ –æ—Ç–µ–ª—è–º –∏ –Ω–æ–º–µ—Ä–∞–º:

–°–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π (HotelController).

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é (RoomController).

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥—Å—á—ë—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º (HotelService).

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏:

Hotel

Room

ReservationLock ‚Äî —É–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–ª–æ—Ç–∞ –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

–ü–æ—Ä—Ç: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π, —Å–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ hotels.

üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é.

–ö–ª—é—á –∑–∞–¥–∞—ë—Ç—Å—è –≤ application.yml —á–µ—Ä–µ–∑ security.jwt.secret.

–ù–∞ —ç—Ç–∞–ø–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –∫–ª—é—á (HMAC).

–ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∫–ª–∞—Å—Å—ã:

JwtSecretKeyProvider

JwtConfig

SecurityConfig

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Keycloak / OAuth2.

‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É booking-service –∏ hotels –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebClient.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞: WebClientConfig.

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ X-Correlation-Id.

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä.

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ (@Transactional).

üß∞ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Spring Boot 3+

Spring Cloud Eureka / Gateway

Spring Security (JWT)

Spring Data JPA / H2

OpenAPI (Swagger)

Lombok

Maven

üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ó–∞–ø—É—Å—Ç–∏ Eureka Server:

mvn -pl eureka-server spring-boot:run


–ó–∞–ø—É—Å—Ç–∏ Gateway:

mvn -pl gateway spring-boot:run


–ó–∞–ø—É—Å—Ç–∏ Booking Service –∏ Hotel Service (–≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö):

mvn -pl booking-service spring-boot:run
mvn -pl hotels spring-boot:run


–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ Eureka:
üëâ http://localhost:8761

üîé –ü—Ä–∏–º–µ—Ä—ã API-–≤—ã–∑–æ–≤–æ–≤ (—á–µ—Ä–µ–∑ Gateway –Ω–∞ 8080)

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

curl -X POST http://localhost:8080/auth/register \
-H 'Content-Type: application/json' \
-d '{"username":"user1","password":"pass"}'


–í—Ö–æ–¥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT

TOKEN=$(curl -s -X POST http://localhost:8080/auth/login \
-H 'Content-Type: application/json' \
-d '{"username":"user1","password":"pass"}' | jq -r .access_token)


–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–µ–ª—è (admin)

curl -X POST http://localhost:8080/hotels \
-H "Authorization: Bearer $TOKEN" \
-H 'Content-Type: application/json' \
-d '{"name":"Hotel A","city":"Tel Aviv","address":"Allenby 10"}'


–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

curl -X POST http://localhost:8080/bookings \
-H "Authorization: Bearer $TOKEN" \
-H 'Content-Type: application/json' \
-d '{"roomId":1,"startDate":"2025-11-01","endDate":"2025-11-05"}'

üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ requestId.

–ü–æ–≤—Ç–æ—Ä—ã —Å backoff –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ—Ç–µ–ª—è–º–∏.

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Swagger:

Booking Service ‚Üí /swagger-ui.html

Hotel Service ‚Üí /swagger-ui.html

Gateway (–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä) ‚Üí http://localhost:8080/swagger-ui.html

üß© –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–î–æ–±–∞–≤–∏—Ç—å Circuit Breaker (Resilience4j).

–í—ã–Ω–µ—Å—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ Config Server.

–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É (Zipkin / Sleuth).

–†–∞—Å—à–∏—Ä–∏—Ç—å Hotel Service –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –¥–∞—Ç–∞–º.

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º Identity Provider.